import{j as e,g as r,C as x,k as y}from"./index-Dw-DZviR.js";import{f as j}from"./formatCurrency-BZXuqCc9.js";const v=s=>e.jsxs("div",{className:"pizza",children:[e.jsx("h1",{children:s.name}),e.jsx("p",{children:s.description}),e.jsx("img",{src:s.image,alt:s.name})]}),g=void 0;function b(){const[s,o]=r.useContext(x),[c,l]=r.useState(!1);let d=0;for(let a=0;a<s.length;a++){const t=s[a];d+=t.pizza.sizes[t.size]}async function h(){l(!0),await fetch(`${g}/api/order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:s})}),o([]),l(!1)}function z(a){const t=s.filter((p,n)=>n!==a);o(t)}function u(){o([])}return e.jsx("div",{children:c?e.jsx("h2",{children:"LOADING …"}):e.jsxs("div",{className:"cart",children:[e.jsx("h2",{children:"Cart"}),e.jsx("ul",{children:s.map((a,t)=>e.jsxs("li",{children:[e.jsx("span",{className:"size",children:a.size})," –",e.jsx("span",{className:"type",children:a.pizza.name})," –",e.jsx("span",{className:"price",children:a.price}),e.jsx("button",{type:"button",className:"cartRemoveButton",onClick:()=>z(t),children:"X"})]},t))}),e.jsxs("p",{children:["Total: ",j(d)]}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:h,children:"Checkout"})}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:u,children:"Clear Cart"})})]})})}const S=void 0,k=y("/order")({component:N});function N(){const[s,o]=r.useState("pepperoni"),[c,l]=r.useState("M"),[d,h]=r.useState([]),[z,u]=r.useState(!0),[a,t]=r.useContext(x);let p,n;z||(n=d.find(i=>s===i.id),p=j(n.sizes?n.sizes[c]:"")),r.useEffect(()=>{m()},[]);async function m(){const C=await(await fetch(`${S}/api/pizzas`)).json();h(C),u(!1)}function f(){t([...a,{pizza:n,size:c,price:p}])}return e.jsxs("div",{className:"order",children:[e.jsx("h2",{children:"Create Order"}),e.jsxs("form",{action:f,children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pizza-type",children:"Pizza Type"}),e.jsx("select",{onChange:i=>o(i.target.value),name:"pizza-type",value:s,children:d.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pizza-size",children:"Pizza Size"}),e.jsxs("div",{children:[e.jsxs("span",{children:[e.jsx("input",{onChange:i=>l(i.target.value),checked:c==="S",type:"radio",name:"pizza-size",value:"S",id:"pizza-s"}),e.jsx("label",{htmlFor:"pizza-s",children:"Small"})]}),e.jsxs("span",{children:[e.jsx("input",{onChange:i=>l(i.target.value),checked:c==="M",type:"radio",name:"pizza-size",value:"M",id:"pizza-m"}),e.jsx("label",{htmlFor:"pizza-m",children:"Medium"})]}),e.jsxs("span",{children:[e.jsx("input",{onChange:i=>l(i.target.value),checked:c==="L",type:"radio",name:"pizza-size",value:"L",id:"pizza-l"}),e.jsx("label",{htmlFor:"pizza-l",children:"Large"})]})]})]}),e.jsx("button",{type:"submit",children:"Add to Cart"})]}),z?e.jsx("h3",{children:"Loading..."}):e.jsxs("div",{className:"order-pizza",children:[e.jsx(v,{name:n.name,description:n.description,image:n.image}),e.jsx("p",{children:p})]}),e.jsx(b,{})]})]})}export{k as Route};
